#!/usr/bin/python3
import socket
import os

ip = '172.31.8.131'
port = 9999

client = socket.socket()
client.connect((ip, port))
print("connected with server")

os.system("sudo /home/centos/shellcodes/U01.sh")

filename = 'u01.log'
data_transferred = 0
print("파일 %s 전송 시작" %filename)
with open(filename, 'rb') as f:
    try:
        data = f.read(1024) #1024바이트 읽는다
        while data: #데이터가 없을 때까지
            data_transferred += client.send(data) #1024바이트 보내고 크기 저장
            data = f.read(1024) #1024바이트 읽음
            print(data)
    except Exception as ex:
        print(ex)
print("전송완료 %s, 전송량 %d" %(filename, data_transferred))

os.system("sudo /home/centos/shellcodes/U02.sh")

filename = 'u02.log'
data_transferred = 0
print("파일 %s 전송 시작" %filename)
with open(filename, 'rb') as f:
    try:
        data = f.read(1024)
        while data:
            data_transferred += client.send(data) #1024바이트 보내고 크기 저장
            data = f.read(1024) #1024바이트 읽음
    except Exception as ex:
        print(ex)
print("전송완료 %s, 전송량 %d" %(filename, data_transferred))

client.close()

